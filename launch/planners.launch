<launch>

  <!-- most of this is from pr2_arm_navigation_planning -->

  <arg name="use_right_arm" default="true" />
  <arg name="use_left_arm" default="true" />

  <arg if="$(arg use_right_arm)"      name="right_arm_text" value="right" />
  <arg unless="$(arg use_right_arm)"  name="right_arm_text" value="" />
  <arg if="$(arg use_left_arm)"       name="left_arm_text" value="left" />
  <arg unless="$(arg use_left_arm)"   name="left_arm_text" value="" />
  <arg name="arm_config" value="$(arg right_arm_text)_$(arg left_arm_text)" />
  
  <include file="$(find pr2_machine)/$(env ROBOT).machine" />  

  <arg name="planner_type" value="RRTConnectkConfig1" />
  <param name="planner_config_name" value="$(arg planner_type)" />
 
  <!-- send additional description parameters -->
  <include file="$(find pr2_arm_navigation_config)/launch/pr2_planning_environment.launch" />

  <!-- can use multiple rr planners for repairing -->
  <node machine="c2" pkg="lightning" type="planner_stoppable_main" args="rr_planner0 stop_rr_planning" name="rr_planner_node0" output="screen">
    <param name="default_planner_config" type="string" value="$(arg planner_type)"/>
    <rosparam command="load" file="$(find lightning)/config/$(arg arm_config)_arm_groups.yaml" />
    <rosparam command="load" file="$(find lightning)/config/ompl_planning.yaml" />
  </node>

  <node machine="c2" pkg="lightning" type="planner_stoppable_main" args="rr_planner1 stop_rr_planning" name="rr_planner_node1" output="screen">    
    <param name="default_planner_config" type="string" value="$(arg planner_type)"/>
    <rosparam command="load" file="$(find lightning)/config/$(arg arm_config)_arm_groups.yaml" />
    <rosparam command="load" file="$(find lightning)/config/ompl_planning.yaml" />
  </node>
  
  <!-- should only need one pfs planner -->
  <node machine="c2" pkg="lightning" type="planner_stoppable_main" args="pfs_planner0 stop_pfs_planning" name="pfs_planner_node0" output="screen"> 
    <param name="default_planner_config" type="string" value="$(arg planner_type)"/>
    <rosparam command="load" file="$(find lightning)/config/$(arg arm_config)_arm_groups.yaml" />
    <rosparam command="load" file="$(find lightning)/config/ompl_planning.yaml" />
  </node>

</launch>
